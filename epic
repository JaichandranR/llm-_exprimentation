Construct Global Lineage/Dependency for Advanced DRD Purge Governance Framework Using Spark
Epic Summary:

Construct Global Lineage/Dependency for advanced DRD purge governance framework using Spark.

Epic Description:

As a Foundation Service Stack Engineer, I want to build a unified, Spark-powered global lineage and dependency framework that aggregates manifest.json metadata from all dbt projects and constructs a centralized Iceberg-based master dependency table. This lineage dataset will drive advanced DRD purge governance by ensuring retention-based purging is lineage-aware, dependency-safe, and consistent across AWS and on-prem environments.

The scope includes:

Centralized manifest.json ingestion from all team pipelines

One-time metadata collector job to extract model metadata & dependencies

Creation of a Global Model Dependency Iceberg table

Spark DRD purge job (AWS + on-prem compatible)

Safety rules (unpartitioned tables, dependent tables, hot partitions)

Leaf-first purge ordering using the global lineage graph

Automated CI/CD publishing + incremental lineage refresh

Full end-to-end testing and operational documentation

This framework enables enterprise-grade, dependency-aware DRD purging across COSMOS data domains.

Epic Acceptance Criteria:

Global dependency table constructed and populated from all manifests

Centralized lineage extraction job built and validated

Spark-based DRD purge job operational in AWS and on-prem

Safety validations prevent accidental purge violations

Leaf-first purge ordering implemented

Automated manifest ingestion + lineage refresh working

End-to-end purge flow tested across multiple team datasets

Documentation, SOPs, and runbooks completed

Architecture team sign-off obtained
