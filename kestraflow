Capacity Analysis:
Sizing for the Trino cluster was based on a combination of vendor recommendations, historical workload data, and performance testing:

Historical Usage: Previous metrics from the legacy environment were analyzed, focusing on peak concurrent queries, data scan volumes, and spill-to-disk frequency.

Vendor Guidance: Trino best practice guidelines were used to determine CPU/memory per worker for optimal parallelism.

Performance Testing: Load testing was performed in the new Foundation Service Stack with representative datasets to validate query execution times and resource utilization.

Autoscaling: The Horizontal Pod Autoscaler (HPA) for trino-worker is configured with 5 min pods and 30 max pods at 60% CPU utilization threshold, enabling dynamic scaling during high-demand periods.

Storage Allocation: Ephemeral worker volumes sized at 20 Gi to support spill and temporary data during large query execution.
This approach ensured initial sizing could handle 120% of historical peak load, with room for growth via autoscaling.
Expected Growth (6â€“12 Months):
The Trino deployment is currently in the process of migrating from the legacy GKP instance to the Foundation Service Stack. As the migration progresses:

Query Volume: Overall query volume on this environment is expected to gradually reduce as workloads are shifted to the Foundation Service Stack.

Data Volume: Processed data volume stored in associated PVCs and S3 locations will also decrease over time as datasets are re-pointed or migrated.

Decommissioning Plan: Once all consumers have fully transitioned to the Foundation Service Stack, this legacy deployment will be decommissioned, eliminating the need for ongoing scaling or storage growth in this environment.

Interim Period: During the migration, resource utilization may remain stable or slightly fluctuate, but no significant long-term growth is anticipated.

Capacity Management: HPA remains in place to handle short-term demand spikes during the transition period.
