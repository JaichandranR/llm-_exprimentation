- id: prepare_dates
  type: io.kestra.core.tasks.debugs.Return
  format: >
    [
      {% set added = false %}

      "{{ now() | date('yyyy-MM-dd') }}"{% set added = true %}

      {% set m1 = now() | date('yyyy-MM-01') %}
      {% if added %},{% endif %}
      "{{ m1 }}"{% set added = true %}

      {% for i in range(1, 7) %}
        {% set d = now() | dateAdd(-i, 'MONTHS') | date('yyyy-MM-01') %}
        {% if added %},{% endif %}
        "{{ d }}"{% set added = true %}
      {% endfor %}
    ]
