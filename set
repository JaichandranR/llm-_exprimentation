- id: prepare_dates
  type: io.kestra.core.tasks.debugs.Return
  format: ""
  fields:
    value: |
      {% set today = now() | date('yyyy-MM-dd') %}
      {% set m1 = now() | date('yyyy-MM-01') %}
      {% set dates = [{"index": 0, "date": today}, {"index": 1, "date": m1}] %}
      {% for i in range(1, 10) %}
        {% set d = now() | dateAdd(-i, 'MONTHS') | date('yyyy-MM-01') %}
        {% set dates = dates + [{"index": i + 1, "date": d}] %}
      {% endfor %}
      {{ dates }}
